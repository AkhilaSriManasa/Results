# -*- coding: utf-8 -*-
#123.
# extract version
# -*- coding: utf-8 -*-
#
# ws4py documentation build configuration file, created by
# sphinx-quickstart on Sat Feb 18 19:54:37 2012.
#
# This file is execfile()d with the current directory set to its containing dir.
#
# Note that not all possible configuration values are present in this
# autogenerated file.
#
# All configuration values have a default; values that are commented out
# serve to show the default.
# If extensions (or modules to document with autodoc) are in another directory,
# add these directories to sys.path here. If the directory is relative to the
# documentation root, use os.path.abspath to make it absolute, like shown here.
# -- General configuration -----------------------------------------------------
# If your documentation needs a minimal Sphinx version, state it here.
#needs_sphinx = '1.0'
# Add any Sphinx extension module names here, as strings. They can be extensions
# coming with Sphinx (named 'sphinx.ext.*') or your custom ones.
# Add any paths that contain templates here, relative to this directory.
# The suffix of source filenames.
# The encoding of source files.
# The master toctree document.
# General information about the project.
# The version info for the project you're documenting, acts as replacement for
# |version| and |release|, also used in various other places throughout the
# built documents.
#
# The short X.Y version.
# The full version, including alpha/beta/rc tags.
# The language for content autogenerated by Sphinx. Refer to documentation
# for a list of supported languages.
#language = None
# There are two options for replacing |today|: either, you set today to some
# non-false value, then it is used:
#today = ''
# Else, today_fmt is used as the format for a strftime call.
#today_fmt = '%B %d, %Y'
# List of patterns, relative to source directory, that match files and
# directories to ignore when looking for source files.
# The reST default role (used for this markup: `text`) to use for all documents.
#default_role = None
# If true, '()' will be appended to :func: etc. cross-reference text.
# If true, the current module name will be prepended to all description
# unit titles (such as .. function::).
#add_module_names = True
# If true, sectionauthor and moduleauthor directives will be shown in the
# output. They are ignored by default.
# The name of the Pygments (syntax highlighting) style to use.
# A list of ignored prefixes for module index sorting.
#modindex_common_prefix = []
# -- Options for HTML output ---------------------------------------------------
# The theme to use for HTML and HTML Help pages.  See the documentation for
# a list of builtin themes.
# Theme options are theme-specific and customize the look and feel of a theme
# further.  For a list of options available for each theme, see the
# documentation.
#html_theme_options = {}
# Add any paths that contain custom themes here, relative to this directory.
#html_theme_path = []
# The name for this set of Sphinx documents.  If None, it defaults to
# "<project> v<release> documentation".
#html_title = None
# A shorter title for the navigation bar.  Default is the same as html_title.
#html_short_title = None
# The name of an image file (relative to this directory) to place at the top
# of the sidebar.
#html_logo = None
# The name of an image file (within the static path) to use as favicon of the
# docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32
# pixels large.
#html_favicon = None
# Add any paths that contain custom static files (such as style sheets) here,
# relative to this directory. They are copied after the builtin static files,
# so a file named "default.css" will overwrite the builtin "default.css".
# If not '', a 'Last updated on:' timestamp is inserted at every page bottom,
# using the given strftime format.
#html_last_updated_fmt = '%b %d, %Y'
# If true, SmartyPants will be used to convert quotes and dashes to
# typographically correct entities.
#html_use_smartypants = True
# Custom sidebar templates, maps document names to template names.
#html_sidebars = {}
# Additional templates that should be rendered to pages, maps page names to
# template names.
#html_additional_pages = {}
# If false, no module index is generated.
#html_domain_indices = True
# If false, no index is generated.
#html_use_index = True
# If true, the index is split into individual pages for each letter.
#html_split_index = False
# If true, links to the reST sources are added to the pages.
#html_show_sourcelink = True
# If true, "Created using Sphinx" is shown in the HTML footer. Default is True.
#html_show_sphinx = True
# If true, "(C) Copyright ..." is shown in the HTML footer. Default is True.
#html_show_copyright = True
# If true, an OpenSearch description file will be output, and all pages will
# contain a <link> tag referring to it.  The value of this option must be the
# base URL from which the finished HTML is served.
#html_use_opensearch = ''
# This is the file name suffix for HTML files (e.g. ".xhtml").
#html_file_suffix = None
# Output file base name for HTML help builder.
# -- Options for LaTeX output --------------------------------------------------
# The paper size ('letterpaper' or 'a4paper').
#'papersize': 'letterpaper',
# The font size ('10pt', '11pt' or '12pt').
#'pointsize': '10pt',
# Additional stuff for the LaTeX preamble.
#'preamble': '',
# Grouping the document tree into LaTeX files. List of tuples
# (source start file, target name, title, author, documentclass [howto/manual]).
# The name of an image file (relative to this directory) to place at the top of
# the title page.
#latex_logo = None
# For "manual" documents, if this is true, then toplevel headings are parts,
# not chapters.
#latex_use_parts = False
# If true, show page references after internal links.
#latex_show_pagerefs = False
# If true, show URL addresses after external links.
#latex_show_urls = False
# Documents to append as an appendix to all manuals.
#latex_appendices = []
# If false, no module index is generated.
#latex_domain_indices = True
# -- Options for manual page output --------------------------------------------
# One entry per manual page. List of tuples
# (source start file, name, description, authors, manual section).
# If true, show URL addresses after external links.
#man_show_urls = False
# -- Options for Texinfo output ------------------------------------------------
# Grouping the document tree into Texinfo files. List of tuples
# (source start file, target name, title, author,
#  dir menu entry, description, category)
# Documents to append as an appendix to all manuals.
#texinfo_appendices = []
# If false, no module index is generated.
#texinfo_domain_indices = True
# How to display URL addresses: 'footnote', 'no', or 'inline'.
#texinfo_show_urls = 'footnote'
# -- Options for Epub output ---------------------------------------------------
# Bibliographic Dublin Core info.
# The language of the text. It defaults to the language option
# or en if the language is not set.
#epub_language = ''
# The scheme of the identifier. Typical schemes are ISBN or URL.
#epub_scheme = ''
# The unique identifier of the text. This can be a ISBN number
# or the project homepage.
#epub_identifier = ''
# A unique identification for the text.
#epub_uid = ''
# A tuple containing the cover image and cover page html template filenames.
#epub_cover = ()
# HTML files that should be inserted before the pages created by sphinx.
# The format is a list of tuples containing the path and title.
#epub_pre_files = []
# HTML files shat should be inserted after the pages created by sphinx.
# The format is a list of tuples containing the path and title.
#epub_post_files = []
# A list of files that should not be packed into the epub file.
#epub_exclude_files = []
# The depth of the table of contents in toc.ncx.
#epub_tocdepth = 3
# Allow duplicate toc entries.
#epub_tocdup = True
#run_gevent()
# -*- coding: utf-8 -*-
#self.droid.startSensingThreshold(1, 0, 7)
#self.droid.startSensingThreshold(2, 1, 2)
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#chat').val($('#chat').val() + 'Bye bye...\\n');
#chat').val($('#chat').val() + evt.data + '\\n');
#chat').val($('#chat').val() + 'Connection closed by server: ' + evt.code + ' \"' + evt.reason + '\"\\n');
#send').click(function() {
#message').val());
#message').val());
#message').val("");
#' id='chatform' method='get'>
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#" * i
# -*- coding: utf-8 -*-
# We won't get this back
# -*- coding: utf-8 -*-
# self.clients is set from within the server
# and holds the list of all connected servers
# we can dispatch to
# keep track of connected websocket clients
# so that we can brodcasts messages sent by one
# to all of them. Aren't we cool?
#chat').val($('#chat').val() + 'Bye bye...\\n');
#chat').val($('#chat').val() + evt.data + '\\n');
#chat').val($('#chat').val() + 'Connection closed by server: ' + evt.code + ' \"' + evt.reason + '\"\\n');
#send').click(function() {
#message').val());
#message').val());
#message').val("");
#' id='chatform' method='get'>
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# every 30s, we check if we have dead boards
# and we clean them
# board index to quickly retrieve
# clients of a given board
# Creating our tool so that they can be
# used below in the CherryPy applications
# Web Application
# WebSocket endpoint
# -*- coding:utf-8 -*-
# SOURCE LINE 1
# SOURCE LINE 38
# -*- coding:utf-8 -*-
# SOURCE LINE 1
# SOURCE LINE 44
#main -->\n        </div> <!-- #main-container -->\n\n        <div class="footer-container">\n            <footer class="wrapper">\n                <p>&copy; 2014 | <a href="http://www.defuze.org/">Sylvain Hellegouarch</a></p>\n            </footer>\n        </div>\n\n        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>\n        <script type="application/javascript" src="/static/vendors/initializr/js/plugins.js"></script>\n    </body>\n</html>\n')
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# we don't need a HTTP server for this test
# the following call to .close() on the
# websocket object will initiate
# the closing handshake
# This next line mocks the response
# from the client to actually
# complete the handshake.
# The manager will then remove the websocket
# from its pool
# the poller runs a thread, give it time to get there
# just wait up to 5 seconds.
# -*- coding: utf-8 -*-
# pretend the socket is an SSL socket
# -*- coding: utf-8 -*-
# fake huge length
# once encoded the u'\xe9' character will be of length 2
# determine how the size is stored
# that's a large frame indeed
# this will compute the actual application data size
# it will also read the first byte of data
# indeed the length is found from byte 3 to 10
# parse the rest of our data
# The same but this time we provide enough
# bytes so that the application's data length
# can be computed from the first generator's send call
# parse the rest of our data
# The same with masking given out gradually
# parse the mask gradually
# even though we tried to inject 512 bytes, we
# still only read 256
# determine how the size is stored
# that's a large frame indeed
# this will compute the actual application data size
# it will also read the first byte of data
# indeed the length is found from byte 3 to 10
# parse the rest of our data
# The same but this time we provide enough
# bytes so that the application's data length
# can be computed from the first generator's send call
# parse the rest of our data
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# just make sure it had the time to finish
# epoll's documentation doesn't say anything
# about removing fds that are not registered
# yet/any longer
# this isn't really what's happening
# inside but we're not testing
# epoll afterall
# fake EPOLLIN
# IOError is swallowed
# -*- coding: utf-8 -*-
# length is compted on the unicode representation
# but once encoded it's actually taking 8 bytes in UTF-8
# no masking
# mask takes 4 bytes
# length is compted on the unicode representation
# but once encoded it's actually taking 8 bytes in UTF-8
# no masking
# mask takes 4 bytes
# length is compted on the unicode representation
# but once encoded it's actually taking 8 bytes in UTF-8
# no masking
# mask takes 4 bytes
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# Frame opcodes defined in the spec.
# perhaps from os.urandom(4)
#section-5.2
# Python generators must be initialized once.
## +-+-+-+-+-------+
## |F|R|R|R| opcode|
## |I|S|S|S|  (4)  |
## |N|V|V|V|       |
## | |1|2|3|       |
## +-+-+-+-+-------+
##                 +-+-------------+-------------------------------+
##                 |M| Payload len |    Extended payload length    |
##                 |A|     (7)     |             (16/63)           |
##                 |S|             |   (if payload len==126/127)   |
##                 |K|             |                               |
## +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +
## |     Extended payload length continued, if payload len == 127  |
## + - - - - - - - - - - - - - - - +-------------------------------+
## + - - - - - - - - - - - - - - - +-------------------------------+
## |                               |Masking-key, if MASK set to 1  |
## +-------------------------------+-------------------------------+
## | Masking-key (continued)       |          Payload Data         |
## +-------------------------------- - - - - - - - - - - - - - - - +
## :                     Payload Data continued ...                :
## + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +
## |                     Payload Data continued ...                |
## +---------------------------------------------------------------+
# yield until we get the first header's byte
# frame-fin = %x0 ; more frames of this message follow
#           / %x1 ; final frame of this message
# frame-rsv1 = %x0 ; 1 bit, MUST be 0 unless negotiated otherwise
# frame-rsv2 = %x0 ; 1 bit, MUST be 0 unless negotiated otherwise
# frame-rsv3 = %x0 ; 1 bit, MUST be 0 unless negotiated otherwise
# control frames between 3 and 7 as well as above 0xA are currently reserved
# control frames cannot be fragmented
# do we already have enough some_bytes to continue?
# Yield until we get the second header's byte
# All control frames MUST have a payload length of 125 some_bytes or less
# This will compute the actual application data size
# -*- coding: utf-8 -*-
# register the client once the handshake is done
# blocks forever
# just in case the file descriptor was reused
# we actually check the instance (well, this might
# also have been reused...)
# I don't know what kind of errors might spew out of here
# but they probably shouldn't crash the entire server.
# Treat the error as if once() had returned None
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
# Python generators must be initialized once.
# Let's avoid unmasking when there is no payload
# If we reach this stage, it's because
# the frame wasn't masked and we didn't expect
# it anyway. Therefore, on py2k, the bytes
# are actually a str object and can't be used
# in the utf8 validator as we need integers
# when we get each byte one by one.
# Our only solution here is to convert our
# string to a bytearray.
# We got a text frame before we completed the previous one
# We got a text frame before we completed the previous one
# at this stage, some_bytes have been unmasked
# so actually are held in a bytearray
# Those codes are reserved or plainly forbidden
# coding=utf-8
###############################################################################
##
##  Copyright 2011 Tavendo GmbH
##
##  Note:
##
##  This code is a Python implementation of the algorithm
##
##            "Flexible and Economical UTF-8 Decoder"
##
##  by Bjoern Hoehrmann
##
##       bjoern@hoehrmann.de
##       http://bjoern.hoehrmann.de/utf-8/decoder/dfa/
##
##  Licensed under the Apache License, Version 2.0 (the "License");
##  you may not use this file except in compliance with the License.
##  You may obtain a copy of the License at
##
##      http://www.apache.org/licenses/LICENSE-2.0
##
##  Unless required by applicable law or agreed to in writing, software
##  distributed under the License is distributed on an "AS IS" BASIS,
##  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
##  See the License for the specific language governing permissions and
##  limitations under the License.
##
###############################################################################
## DFA transitions
# 00..1f
# 20..3f
# 40..5f
# 60..7f
# 80..9f
# a0..bf
# c0..df
# e0..ef
# f0..ff
# s0..s0
# s1..s2
# s3..s4
# s5..s6
# s7..s8
# make sure 'i' is set if when 'ba' is empty
## optimized version of decode(), since we are not interested in actual code points
# -*- coding: utf-8 -*-
#section-7.4.1
#section-7.4.1
#notes-on-non-blocking-sockets>`_
# process as much as we can
# the process will stop either if there is no buffer left
# or if the stream is closed
# only pass the requested number of bytes, leave the rest in the buffer
# Cleaning up resources
# -*- coding: utf-8 -*-
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are
# met:
#
#     * Redistributions of source code must retain the above copyright
# notice, this list of conditions and the following disclaimer.
#     * Redistributions in binary form must reproduce the above
# copyright notice, this list of conditions and the following disclaimer
# in the documentation and/or other materials provided with the
# distribution.
#     * Neither the name of ws4py nor the names of its
# contributors may be used to endorse or promote products derived from
# this software without specific prior written permission.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
# A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
# OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
# LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
# DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
# THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
# (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
# OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
# -*- coding: utf-8 -*-
# When the connection is closed, put a StopIteration
# on the message queue to signal there's nothing left
# to wait for
# If the websocket was terminated and there are no messages
# left in the queue, return None immediately otherwise the client
# will block forever
# -*- coding: utf-8 -*-
#" * i
#%d" % len(m))
# -*- coding: utf-8 -*-
#" * i
#%d" % len(m))
# -*- coding: utf-8 -*-
# Prevent check_hostname requires server_hostname (ref #187)
# Let's handle IPv4 and IPv6 addresses
# Simplified from CherryPy's code
# Adpated from: https://github.com/liris/websocket-client/blob/master/websocket.py#L105
# Python 2.6.1 and below don't parse ws or wss urls properly. netloc is empty.
# See: https://github.com/Lawouach/WebSocket-for-Python/issues/59
# default port is now 443; upgrade self.sender to send ssl
# -*- coding: utf-8 -*-
# By doing this we detach the socket from
# the CherryPy stack avoiding memory leaks
# HTTPConnection is more inner than
# HTTPRequest so we can leave once
# we're done here
#chat').val($('#chat').val() + evt.data + '\\n');
#chat').val($('#chat').val() + 'Connection closed by server: ' + evt.code + ' \"' + evt.reason + '\"\\n');
#chatform').submit(function() {
#message').val());
#message').val("");
# -*- coding: utf-8 -*-
# Build and start the HTTP response
# issue #170
# in gevent 1.1 socket will be closed once application returns
# so let's wait for websocket handler to finish
# -*- coding: utf-8 -*-
#self.transport = transport
#self.stream = asyncio.StreamReader()
#self.stream.set_transport(transport)
# Let make it concurrent for others to tag along
# GET required
# -*- coding: utf-8 -*-
# force execution of the result iterator until first actual content
# now it's safe to look if environ was modified
# An error code has been sent, just exit
# next line is where we'd have expect a configuration key somehow
# backpointer for logging
# -*- coding: utf-8 -*-
